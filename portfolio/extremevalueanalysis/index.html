<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Predicting Building Performance under Extreme Climate Conditions</title>
<meta name="description" content="Describe your website">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/owl.carousel.css">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/owl.theme.css">


  <link href="https://blakeshurtz.github.io/css/style.default.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://blakeshurtz.github.io/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://blakeshurtz.github.io/img/favicon.png">


</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="https://blakeshurtz.github.io">Blake Shurtz</a></h1>
    
      <p class="sidebar-p">I am a data analyst with 10 years of experience in applying data-driven thinking in a business context.</p>
    
      <p class="sidebar-p">This site contains a portfolio of projects I've led that demonstrate best practices in applied statistics and data management.</p>
    
      <p class="sidebar-p">Originally from the Bay Area, currently based in Davis, CA.</p>
    
    <ul class="sidebar-menu">
      
        <li><a href="https://blakeshurtz.github.io/portfolio/">Home</a></li>
      
        <li><a href="https://blakeshurtz.github.io/about/">About</a></li>
      
        <li><a href="https://blakeshurtz.github.io/contact/">Get in touch</a></li>
      
    </ul>
    <p class="social">
  
  <a href="https://www.facebook.com/blake.shurtz.5" data-animate-hover="pulse" class="external facebook">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  
  <a href="https://twitter.com/blakeobeans" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:blakeobeans@gmail.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/blakeshurtz/" data-animate-hover="pulse" class="external">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  <a href="https://stats.stackexchange.com/users/206673/blake-shurtz" data-animate-hover="pulse" class="external">
    <i class="fa fa-stack-overflow"></i>
  </a>
  
  
  <a href="https://github.com/blakeshurtz" data-animate-hover="pulse" class="external">
    <i class="fa fa-github"></i>
  </a>
  
  
  <a href="https://www.youtube.com/channel/UCPDv9VWu9TjTmxja-qLEvVA?view_as=subscriber" data-animate-hover="pulse" class="external">
    <i class="fa fa-youtube"></i>
  </a>
  
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2020 Blake Shurtz |
        
        Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="https://blakeshurtz.github.io">Blake Shurtz</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>Predicting Building Performance under Extreme Climate Conditions</h1>
         <p>Energy-saving building retrofits on the efficient frontier.</p>

<p><em>Thanks to everyone at Greiner, especially the other auditors, who cared enough to help advance the knowledge of building performance.</em></p>

<h4 id="introduction">Introduction</h4>

<p>During my undergraduate education (2006-2009), I majored in <a href="https://en.wikipedia.org/wiki/Environmental_economics">environmental economics</a>. More than once I was challenged with the following question: “Isn’t what’s good for one bad for the other?”</p>

<p>Well, it depends. Of course, there are trade-offs between personal consumption and public goods like clean air. However, <a href="https://en.wikipedia.org/wiki/Kuznets_curve#:~:text=The%20environmental%20Kuznets%20curve%20(EKC)%20is%20a%20hypothesized%20relationship%20between,over%20the%20course%20of%20development.">what’s good for the economy can also be good for the environment (and vice versa)</a>.</p>

<h4 id="energy-efficiency-economics">Energy Efficiency Economics</h4>

<p>In <a href="http://savingenergygrowingjobs.com/">Saving Energy, Growing Jobs</a>, author and economist <a href="https://www.nrdc.org/experts/david-b-goldstein">David Goldstein</a> offers a set of policy proposals around <a href="https://en.wikipedia.org/wiki/Efficient_energy_use">energy efficiency</a> that contradict <a href="https://en.wikipedia.org/wiki/Market_fundamentalism">free-market fundamentalism</a>.</p>

<p>Goldstein chronicles his own research across multiple industries, demonstrating that energy efficiency standards may offer a free lunch by incentivising emergent innovative technologies and practices which increase economic growth while reducing energy usage and related negative environmental externalities.</p>

<p>My interest in energy efficiency led to my first full-time job as an energy analyst in the residential construction sector. <a href="https://www.eia.gov/energyexplained/use-of-energy/">21% of US energy use is in residential buildings</a>. It turns out that energy efficient improvements to our homes are a vital part of our nation&rsquo;s energy policy.</p>

<h4 id="designing-on-the-efficient-frontier">Designing on the Efficient Frontier</h4>

<p>Within the residential energy sector, <a href="https://www.eia.gov/energyexplained/use-of-energy/homes.php">62% of residential building energy use is in heating, ventilation and air conditioning (HVAC)</a>. The way to minimize this portion of building energy usage is through energy-efficient engineering design.</p>

<p><a href="https://en.wikipedia.org/wiki/Climate_of_the_United_States#Pacific_Northwest">West of the Rocky Mountains</a>, here is the recipe for maximizing a building’s climate control efficiency:</p>

<ol>
<li>Reduce the building’s <a href="https://www.energyvanguard.com/blog/77453/The-3-Types-of-Heating-and-Cooling-Loads">heating and cooling loads</a> as much as possible through shading, insulation, <a href="https://www.energyvanguard.com/blog/56102/The-3-Rules-of-Air-Sealing">air sealing</a>, dual-pane windows, etc.</li>
<li>Size the HVAC system according to the building&rsquo;s <a href="https://www.energyvanguard.com/blog/40515/What-Exactly-is-Manual-S-in-HVAC-Design-and-Why-Is-It-Important">cooling load calculation</a> whereby a smaller system would fail to maintain the desired indoor air temperature during a heatwave.</li>
<li>Blast as many cubic feet of air (CFM) across the <a href="https://www.lennox.com/buyers-guide/guide-to-hvac/glossary/evaporator-coil">evaporator coil</a> as possible, which minimizes the energy wasted on dehumidification.</li>
</ol>

<p>The chart below visualizes this process. At a 95 °F outdoor air temperature, a 3 ton air conditioner provides 26 kBTUh of sensible cooling capacity. By increasing the CFM, the sensible cooling capacity increases to over 31 kBTUh- a 15% boost in energy-efficiency.</p>

<p><img src="/img/portfolio/CFM-efficiency.png" alt="manual s" /></p>

<p>This is Goldstein&rsquo;s free lunch in action: the same equipment, designed to higher standards, yields improvements in comfort and energy efficiency.</p>

<h4 id="a-market-failure">A Market Failure</h4>

<p>The process seems simple enough: a contractor performs a cooling load calculation (typically in energy modeling software) which tells them what size air conditioner to install in order adequately cool the building while maintaining equipment efficiency.</p>

<p>Yet, research shows that <a href="https://pdfs.semanticscholar.org/b3cc/87d31eef7abab4849522be8c32bfae7306bb.pdf?_ga=2.207456019.1422701339.1592977330-498279321.1592977330">most HVAC systems in California are over-sized by a 25% or more</a> relative to their modeled cooling load calculation. Not only does this eliminate the 15% efficiency boost, but it substantially degrades equipment durability and indoor air quality.</p>

<p>So why are HVAC systems typically oversized? There are many reasons, but the reason I’m going to focus the most fundamental: <em>fear of being wrong</em>. Simply put, many HVAC contractors do not trust their own cooling load calculations.</p>

<p>It&rsquo;s easy to understand why. Cooling load calculations are meant to simulate a building&rsquo;s cooling needs at extreme outdoor air temperatures of over 100 °F. At these extreme temperatures, will an HVAC contractor really want to put their trust in a computer simulation?</p>

<blockquote>
<p>The purpose of this analysis is to show how buildings actually perform under extreme outdoor air temperatures in order to build confidence in HVAC system sizing, thereby improving building energy-efficiency and moving society to a more sustainable energy future.</p>
</blockquote>

<h4 id="measured-performance">Measured Performance</h4>

<p>During the summers of 2015 and 2016, data loggers were installed on n = 22 different air conditioner condensers. The data loggers measured the condensers’ amperage every minute for an average study duration of 60 days. Each system went through at least one heatwave where temperatures exceeded 100 °F.</p>

<p>An example of a day’s worth of amperage data for a single system is provided below:</p>

<p><img src="/img/portfolio/runtimes.png" alt="runtimes" /></p>

<p>Based on the amperage of the condenser, the HVAC system’s cooling capacity is inferred using <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/Equipment%20Capacity/manual_s.xlsx?raw=true">available engineering data</a>.</p>

<p>Using this data, we can infer the building’s actual cooling load (as apposed to the modeled cooling load) because the heat energy removed by an air conditioner is equivalent to the cooling needs of the building. Heat out = Heat in.</p>

<p>Then, we can then compare the building&rsquo;s actual cooling load to its modeled cooling load in order to better understand how cooling load calculations compare to actual system performance.</p>

<h4 id="cyclical-cooling-loads">Cyclical Cooling Loads</h4>

<p>In order to measure the building’s cooling needs relative to the model, I constructed a key performance indicator called the <strong>cyclical cooling load</strong> (CCL).</p>

<p>The crucial aspect of the CCL is that it aggregates data at the system cycle level, where a cycle is defined as a single “off-on-off” event.</p>

<p>Here’s how it works: the minute-by-minute air conditioning cooling capacity is aggregated across the length of the cycle. For example, if a 36 kBTUh air conditioner runs for 15 minutes, then it would provide 8 kBTUh of cooling in that cycle.</p>

<p>In order to compare performance across buildings with varying modeled cooling loads, as well as understanding the building’s performance relative to the modeled cooling load, the aggregated cooling capacity for each cycle is divided by the building&rsquo;s modeled cooling load.</p>

<p>Continuing the example, a cycle that provides 8 kBTUh of cooling in a home that has a 32 kBTUh cooling load would have a CCL of 0.25.
\begin{align}
{x}_{jk} = {CCL}_{jk}= \frac{\sum_{i=1}^n y_{ijk}}{z_k}  \newline
\end{align}</p>

<p><em>y</em> is the minute-by-minute measurement of the condenser&rsquo;s amperage (and inferred capacity), which is aggregated over all measurements <em>i</em> for each system cycle <em>j</em> and system <em>k</em>, divided by the modeled cooling load <em>z</em> of building <em>k</em>.</p>

<p>For each cycle, the cyclical cooling load has the following interpretation:</p>

<ul>
<li>CCL &lt; 1 indicates that the building’s cooling needs are less than the modeled cooling load. This is typical for most cycles on most days.</li>
<li>CCL = 1 indicates that the building’s cooling needs exactly match its modeled cooling load. Another useful interpretation is that, should the system size perfectly match the modeled cooling load, then the system would run for exactly one hour.</li>
<li>CCL &gt; 1 indicates that the building&rsquo;s cooling load exceeds its modeled cooling load. As the CCL increases above 1, the system is running for over an hour and we should begin to worry that the building may not be able to maintain a comfortable indoor temperature.</li>
</ul>

<p>Re-framed in this way, we can ask, &ldquo;What size CCL can we expect under extreme conditions?&rdquo;</p>

<h4 id="statistical-extremes">Statistical Extremes</h4>

<p>Over the duration of the study, each climate control system had over 1000 cycles on average, which meant potentially over 1000 measurements of the CCL.</p>

<p>We can use this variation to refine our question and ask, &ldquo;With what probability can we expect a CCL of size x?&rdquo; Or, alternatively, &ldquo;What is the highest CCL that will occur 5% of the time or less?&rdquo;</p>

<p>In order to answer these questions, I fit a <a href="https://en.wikipedia.org/wiki/Extreme_value_theory">generalized extreme value probability distribution</a> (GEV) to the data. The GEV distribution extends back to 1928 when Fisher and Tippet demonstrated that regardless of the underlying probability distribution of random variable X, the probability distribution for the last <a href="https://en.wikipedia.org/wiki/Order_statistic">order statistic</a> converges to the GEV distribution.</p>

<p>There are several methods of fitting a GEV model to data. Given the nature of this data set, the tail behavior of the exceedances are modeled using the <a href="https://en.wikipedia.org/wiki/Generalized_Pareto_distribution">Generalized Pareto distribution</a>.</p>

<p>\begin{align}
f(X|\mu, k, \sigma) = \frac{1}{\sigma}(1 + k \frac{x-\mu}{\sigma})^{-(1/k + 1)} \newline
\end{align}</p>

<h4 id="probability-model">Probability Model</h4>

<p>The probability model is coded in <a href="https://mc-stan.org/">Stan</a>. As Stan does not contain functions for the generalized pareto distribution, the log-likelihood probability density (derived below) is included in the <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/scripts/stan-models/individual-effects.stan">function block</a>:</p>

<p>\begin{align}
f(X|\mu, k, \sigma) = \frac{1}{\sigma}(1 + k \frac{x-\mu}{\sigma})^{-(1/k + 1)} \newline
\end{align}</p>

<p>\begin{align}
-(\frac{1}{k}+1) *ln(\frac{1}{\sigma}(1+k\frac{x-\mu}{\sigma})) \newline
-(\frac{1}{k}+1) * ln(\sigma^{-1})+{log1p}(k\frac{x-\mu}{\sigma}) \newline
L=-(\frac{1}{k}+1) \sum_{i=1}^n log1p(\frac{k}{\sigma}(x-\mu)) -N*ln(\sigma)
\end{align}</p>

<p>Because there are multiple buildings to be modeled, the model block incorporates a <a href="https://mc-stan.org/docs/2_23/stan-users-guide/ragged-data-structs-section.html">ragged data structure</a> and runs on a for-loop.</p>

<h4 id="individual-effects-model">Individual Effects Model</h4>

<p>The <strong>individual effects model</strong> measures the parameters and probability distributions for each of the 22 systems.</p>

<p>There are several ways to characterize any probability distribution depending on the research question of interest. What we want to know is the probability of getting a CCL as extreme as X or greater. Given this framing of the question, it makes sense to examine the <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function#Complementary_cumulative_distribution_function_(tail_distribution)">complementary cumulative distribution function</a> (CCDF), an inverse of the cumulative distribution function where higher values of X have decreasing probabilities.</p>

<p>The blue lines in the plot above represent the CCDF for each system, and the red points are the exceedances.</p>

<p><img src="/img/portfolio/indv_plot.jpeg" alt="indv_effects" /></p>

<p>The models clearly fit the data well, although there is some funky behavior at the tail end. There is a lot of variation in threshold performance: most systems have a maximum CCL at around 4 or 5, but some systems have lesser and some have greater.</p>

<h4 id="multilevel-model">Multilevel Model</h4>

<p>What we really want to know are the probabilities associated with the average system- not just the 22 in my sample, but all possible systems. In order to estimate these singular parameters, I fit a <strong>multi-level model</strong> to the data.</p>

<p>This is done by taking a Bayesian approach which assumes that each of the parameters for the individual systems have their own shared Gaussian prior distributions. The parameters of these prior distributions, the <strong>hyperparameters</strong>, represent the quantity of interest, namely, the average parameter across all possible systems.</p>

<p>The CCDF for the multi-level model is below.</p>

<p><img src="/img/portfolio/mlm_plot.jpeg" alt="mlm_plot" /></p>

<p>The grey lines represent 1000 posterior parameter draws as CCDFs. The blue line represents the posterior mean for each of the parameters. The red lines represent the 2.5% and 97.5% probability interval for the posterior.</p>

<p>The key results from the study are as follows:</p>

<blockquote>
<p>95% of the CCL&rsquo;s are less thatn 3.24 (1.02, 7.55) and 99% of the CCL’s are less than 6.63 (1.65, 20.20).</p>
</blockquote>

<p>Most importantly, the average system which is sized to match its cooling load will run for 6.54 hours under the most extreme conditions.</p>

<blockquote>
<p>The median CCL is .52 (.22, .86).</p>
</blockquote>

<p>This means that the median exceedance roughly maps to half of the modeled cooling load. In other words, during heat waves, a rightly-sized system will run for a half hour at a time.</p>

<blockquote>
<p>A CCL of 1 or greater occurs with 29% of the exceedances (.07, .46)</p>
</blockquote>

<p>During heat waves, a system will run for an hour or more on 29% of the cycles.</p>

<p>With these expectations in mind, a contractor can confidently understand how their system will perform under extreme weather conditions when it is accurately sized for the building.</p>

<h4 id="building-performance">Building Performance</h4>

<p>Several customers with rightly-sized systems had their indoor temperatures monitored to ensure that their home maintained temperatures during heat waves.</p>

<p><img src="/img/portfolio/indoortemps.png" alt="indoor temps" /></p>

<p>We can see that this system maintained 74-75 °F indoor temps (the specified design temperature) on the hottest days of the year.</p>

<h4 id="post-script">Post-Script</h4>

<p>I feel like this is a project only I could have done. It combines energy efficiency, building performance and rigorous data analysis and statistical modeling.</p>

<p>Data collection took a number of years and I did not begin the analysis until after completing my MS degree.</p>

<p>Working with this vast amount of engineering data also required gaining functional programming experience in R, including writing functions and executing those functions within a loop.</p>

<p>This is my first attempt at writing native Stan code. This took some time, as the script included function and transformed parameter blocks, ragged data structures in the model block and manipulating posterior samples within R. Fortunately, the theoretical and intuitive understanding of Bayesian statistics guided me through the statistical programming.</p>

<h4 id="works-cited">Works Cited</h4>

<p>Coles, S (2001). &ldquo;An Introduction to Statistical Modeling of Extreme Values.&rdquo; Springer Series in Statistics. Springer Verlag London.</p>

<p>Ribatet, Mathieu. &ldquo;The POT Package: An R Package to Model Peaks Over a Threshold.&rdquo; <a href="http://pot.r-forge.r-project.org/">http://pot.r-forge.r-project.org/</a></p>

<p>Vehtari, Aki. &ldquo;Extreme value analysis and user defined probability functions in Stan.&rdquo; <a href="https://mc-stan.org/users/documentation/case-studies/gpareto_functions.html">https://mc-stan.org/users/documentation/case-studies/gpareto_functions.html</a></p>

<p>GitHub repo <a href="https://github.com/blakeshurtz/AC_runtime_project">here</a>.</p>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://blakeshurtz.github.io/js/jquery.min.js"></script>
<script src="https://blakeshurtz.github.io/js/bootstrap.min.js"></script>
<script src="https://blakeshurtz.github.io/js/jquery.cookie.js"> </script>
<script src="https://blakeshurtz.github.io/js/ekko-lightbox.js"></script>
<script src="https://blakeshurtz.github.io/js/jquery.scrollTo.min.js"></script>
<script src="https://blakeshurtz.github.io/js/masonry.pkgd.min.js"></script>
<script src="https://blakeshurtz.github.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://blakeshurtz.github.io/js/owl.carousel.min.js"></script>
<script src="https://blakeshurtz.github.io/js/front.js"></script>



</body>
</html>
