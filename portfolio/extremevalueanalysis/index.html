<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Predicting Building Performance under Extreme Climate Conditions</title>
<meta name="description" content="Describe your website">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/owl.carousel.css">
<link rel="stylesheet" href="https://blakeshurtz.github.io/css/owl.theme.css">


  <link href="https://blakeshurtz.github.io/css/style.default.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://blakeshurtz.github.io/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://blakeshurtz.github.io/img/favicon.png">


</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="https://blakeshurtz.github.io">Blake Shurtz</a></h1>
    
      <p class="sidebar-p">I am a data analyst with 10 years of experience in applying data-driven thinking in a business context.</p>
    
      <p class="sidebar-p">This site contains a portfolio of projects I've led that demonstrate best practices in applied statistics and data management.</p>
    
      <p class="sidebar-p">Originally from the Bay Area, currently based in Davis, CA.</p>
    
    <ul class="sidebar-menu">
      
        <li><a href="https://blakeshurtz.github.io/portfolio/">Home</a></li>
      
        <li><a href="https://blakeshurtz.github.io/about/">About</a></li>
      
        <li><a href="https://blakeshurtz.github.io/contact/">Get in touch</a></li>
      
    </ul>
    <p class="social">
  
  <a href="https://www.facebook.com/blake.shurtz.5" data-animate-hover="pulse" class="external facebook">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  
  <a href="https://twitter.com/blakeobeans" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:blakeobeans@gmail.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/blakeshurtz/" data-animate-hover="pulse" class="external">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  <a href="https://stats.stackexchange.com/users/206673/blake-shurtz" data-animate-hover="pulse" class="external">
    <i class="fa fa-stack-overflow"></i>
  </a>
  
  
  <a href="https://github.com/blakeshurtz" data-animate-hover="pulse" class="external">
    <i class="fa fa-github"></i>
  </a>
  
  
  <a href="https://www.youtube.com/channel/UCPDv9VWu9TjTmxja-qLEvVA?view_as=subscriber" data-animate-hover="pulse" class="external">
    <i class="fa fa-youtube"></i>
  </a>
  
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2020 Blake Shurtz |
        
        Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="https://blakeshurtz.github.io">Blake Shurtz</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>Predicting Building Performance under Extreme Climate Conditions</h1>
         <p>Energy-saving building retrofits on the efficient frontier.</p>

<p><em>Thanks to everyone at Greiner, especially the other auditors, who cared enough to help advance the knowledge of building performance.</em></p>

<h4 id="environmental-economics">Environmental Economics</h4>

<p>During my undergraduate education (2006-2009), I majored in <a href="https://en.wikipedia.org/wiki/Environmental_economics">environmental economics</a>. More than once I was challenged with the following question: <a href="https://en.wikipedia.org/wiki/Market_fundamentalism">“Isn’t what’s good for one bad for the other?”</a></p>

<p>Well, it depends. There are trade-offs between personal consumption and public goods like clean air. However, <a href="https://en.wikipedia.org/wiki/Kuznets_curve#:~:text=The%20environmental%20Kuznets%20curve%20(EKC)%20is%20a%20hypothesized%20relationship%20between,over%20the%20course%20of%20development.">what’s good for the economy can also be good for the environment (and vice versa)</a>.</p>

<h4 id="energy-efficiency">Energy Efficiency</h4>

<p>In <a href="http://savingenergygrowingjobs.com/">Saving Energy, Growing Jobs</a>, author and economist <a href="https://www.nrdc.org/experts/david-b-goldstein">David Goldstein</a> offers a set of policy proposals around <a href="https://en.wikipedia.org/wiki/Efficient_energy_use">energy efficiency</a>, demonstrating that energy efficiency standards may offer a free lunch by incentivising emergent, innovative technologies and best practices which increase economic growth while reducing energy usage and related negative environmental externalities.</p>

<p>My interest in energy efficiency led to my first full-time job as an energy analyst in the residential construction sector. <a href="https://www.eia.gov/energyexplained/use-of-energy/">21% of US energy use is in residential buildings</a>. It turns out that energy efficient improvements to our homes are a vital part of our nation&rsquo;s energy policy.</p>

<h4 id="designing-on-the-efficient-frontier">Designing on the Efficient Frontier</h4>

<p>Within the residential energy sector, <a href="https://www.eia.gov/energyexplained/use-of-energy/homes.php">62% of residential building energy use is in heating, ventilation and air conditioning (HVAC)</a>. The way to minimize this portion of building energy usage is through <a href="https://www.gti.energy/wp-content/uploads/2018/10/Best-Practices-Guide-v2Complete-lo-res-11-30-2012.pdf">energy-efficient engineering design.</a></p>

<p><a href="https://en.wikipedia.org/wiki/Climate_of_the_United_States#Pacific_Northwest">West of the Rocky Mountains</a>, here is a basic recipe for maximizing a building’s HVAC efficiency:</p>

<ol>
<li>Reduce the building’s <a href="https://www.energyvanguard.com/blog/77453/The-3-Types-of-Heating-and-Cooling-Loads">heating and cooling loads</a> as much as possible through shading, insulation, <a href="https://www.energyvanguard.com/blog/56102/The-3-Rules-of-Air-Sealing">air sealing</a>, dual-pane windows, etc.</li>
<li>Size the air conditioning system according to the building&rsquo;s <a href="https://www.energyvanguard.com/blog/40515/What-Exactly-is-Manual-S-in-HVAC-Design-and-Why-Is-It-Important">cooling load calculation</a> <em>whereby a smaller system would fail to maintain the desired indoor air temperature during a heat wave.</em></li>
<li>Blast as many cubic feet of air (CFM) across the <a href="https://www.lennox.com/buyers-guide/guide-to-hvac/glossary/evaporator-coil">evaporator coil</a> as possible, which minimizes the energy wasted on dehumidification.</li>
</ol>

<p>The chart below visualizes this process. At a 95 °F outdoor air temperature, a 3 ton air conditioner provides 26 kBTUh of sensible cooling capacity. By increasing the CFM, the sensible cooling capacity increases to over 31 kBTUh- a 15% boost in cooling efficiency.</p>

<p><img src="/img/portfolio/CFM-efficiency.png" alt="manual s" /></p>

<p>This is Goldstein&rsquo;s free lunch in action: the same equipment, designed to higher standards, yields improvements in comfort and energy efficiency.</p>

<h4 id="a-market-failure">A Market Failure</h4>

<p>The process seems simple enough: a contractor performs a cooling load calculation (typically in energy modeling software) which tells them what size air conditioner to install in order adequately cool the building while maintaining equipment efficiency.</p>

<p>Yet research shows that <a href="https://pdfs.semanticscholar.org/b3cc/87d31eef7abab4849522be8c32bfae7306bb.pdf?_ga=2.207456019.1422701339.1592977330-498279321.1592977330">most HVAC systems in California are over-sized by a 25% or more</a> relative to their modeled cooling load calculation. Not only does this eliminate the 15% efficiency boost, but it substantially degrades equipment durability and indoor air quality.</p>

<p>So why are HVAC systems typically oversized? There are many reasons, but the fundamental reason is that contractors are afraid of installing equipment that may fail to keep a building cool during a heat wave.</p>

<p>It&rsquo;s easy to understand why. Cooling load calculations are meant to simulate a building&rsquo;s cooling needs at outdoor air temperatures of over 100 °F. At these extreme temperatures, how much trust would you put in a computer simulation?</p>

<blockquote>
<p>The purpose of this analysis is to show how buildings actually perform under extreme outdoor air temperatures in order to build confidence in the HVAC system sizing process, thereby improving building energy-efficiency and moving society to a more sustainable energy future.</p>
</blockquote>

<h4 id="measured-performance">Measured Performance</h4>

<p>During the summers of 2016 and 2017, data loggers were installed on <em>n = 22</em> different <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/logger%20image/KIMG0016_small.jpg">air conditioner condensers</a>. The data loggers measured the condensers’ <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/data/logger-data/customer_02.csv">amperage draw every minute</a> over an average study duration of 60 days. Each system went through at least one heat wave where outdoor air temperatures exceeded 100 °F.</p>

<p>A visualization of a day’s worth of amperage measurements for a single <a href="https://www.coolray.com/help-guides/single-stage-vs.-two-stage-air-conditioner-4-common-questions-answered">two-stage</a> system is provided below:</p>

<p><img src="/img/portfolio/runtimes.png" alt="runtimes" /></p>

<p>Based on the amperage of the condenser, the air conditioner&rsquo;s cooling capacity is inferred using <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/Equipment%20Capacity/manual_s.xlsx?raw=true">available engineering data</a>.</p>

<blockquote>
<p>Using this data, we can measure the building’s actual cooling load (as apposed to the modeled cooling load) because the heat energy removed by an air conditioner is equivalent to the cooling needs of the building.</p>
</blockquote>

<h4 id="cyclical-cooling-loads">Cyclical Cooling Loads</h4>

<p>In order to compare each building’s actual cooling load to its model, I constructed a key performance indicator called the <strong>cyclical cooling load</strong> (CCL).</p>

<p>The crucial aspect of the CCL is that it aggregates data at the <strong>system cycle</strong> level. (In the previous plot, we can see that the system cycled on 14 times throughout the day.)</p>

<p>Here’s how it works: for each cycle, the minute-by-minute cooling capacity is aggregated. For example, if a 36 kBTUh air conditioner runs for 15 minutes, then it would provide 8 kBTUh of cooling in that cycle.</p>

<p>The cyclical cooling capacity is then divided by the building&rsquo;s modeled cooling load. This allows us to understand each building’s performance relative to its model while also standardizing the KPI across the disparate buildings in the study.</p>

<p>Continuing the example, a cycle that provides 8 kBTUh of cooling in a building with a 32 kBTUh cooling load would have a CCL of 0.25. The formula for the CCL is below:
\begin{align}
{x}_{jk} = {CCL}_{jk}= \frac{\sum_{i=1}^n y_{ijk}}{z_k}  \newline
\end{align}</p>

<p><em>y</em> is the minute-by-minute measurement of the condenser&rsquo;s capacity, which is aggregated over all measurements <em>i</em> for each system cycle <em>j</em> and system <em>k</em>, which is then divided by the modeled cooling load <em>z</em> of building <em>k</em>.</p>

<p>For each cycle, the cyclical cooling load has the following interpretation:</p>

<ul>
<li>CCL &lt; 1 indicates that the building’s cooling needs are less than the modeled cooling load. This is typical for most cycles on most days.</li>
<li>CCL = 1 indicates that the building’s cooling needs exactly match its modeled cooling load. Should the installed system capacity match the modeled cooling load, then the system (a &ldquo;rightly-sized system&rdquo;) would run for exactly one hour.</li>
<li>CCL &gt; 1 indicates that the building&rsquo;s cooling load exceeds its modeled cooling load and that a rightly sized air conditioner is running for over an hour.</li>
</ul>

<p>The research question of interest, re-framed in terms of the CCL, asks &ldquo;What size CCL can we expect under extreme conditions?&rdquo;</p>

<h4 id="the-generalized-extreme-value-distribution">The Generalized Extreme Value Distribution</h4>

<p>Over the duration of the study, each climate control system had over 1000 cycles on average, which means potentially over 1000 measurements of the CCL.</p>

<blockquote>
<p>We can use the variation in CCL measurements to refine our question and ask, &ldquo;What value CCL occurs 1% of the time or less?&rdquo;</p>
</blockquote>

<p>In order to answer this question, I fit a <a href="https://en.wikipedia.org/wiki/Extreme_value_theory">Generalized Extreme Value distribution</a> (GEV) to the data. The GEV distribution extends back to <a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Tippett%E2%80%93Gnedenko_theorem">1928 when Fisher and Tippet</a> demonstrated that regardless of the underlying probability distribution of the random variable X, the probability distribution for the last <a href="https://en.wikipedia.org/wiki/Order_statistic">order statistic</a> converges to the GEV distribution.</p>

<p>There are several methods of fitting a GEV model to data. Given the nature of this data set, the tail behavior of the exceedances are modeled using the <a href="https://en.wikipedia.org/wiki/Generalized_Pareto_distribution">Generalized Pareto distribution</a>.</p>

<p>\begin{align}
f(X|\mu, k, \sigma) = \frac{1}{\sigma}(1 + k \frac{x-\mu}{\sigma})^{-(1/k + 1)} \newline
\end{align}</p>

<p>The model finds the optimal values for the location parameter <em>k</em> and the scale parameter <em>σ</em>, while the threshold parameter <em>μ</em> is estimated from the data by studying the <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/plots/threshold_selection.jpeg">linearity of the exceedences.</a></p>

<h4 id="probability-model">Probability Model</h4>

<p>The probability model is coded in <a href="https://mc-stan.org/">Stan</a>. As Stan does not contain built-in functions for the Generalized Pareto Distribution, the log-likelihood probability density (derived below) is included in the <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/scripts/stan-models/individual-effects.stan">function block</a>:</p>

<p>\begin{align}
f(X|\mu, k, \sigma) = \frac{1}{\sigma}(1 + k \frac{x-\mu}{\sigma})^{-(1/k + 1)} \newline
\end{align}</p>

<p>\begin{align}
-(\frac{1}{k}+1) *ln(\frac{1}{\sigma}(1+k\frac{x-\mu}{\sigma})) \newline
-(\frac{1}{k}+1) * ln(\sigma^{-1})+{log1p}(k\frac{x-\mu}{\sigma}) \newline
L=-(\frac{1}{k}+1) \sum_{i=1}^n log1p(\frac{k}{\sigma}(x-\mu)) -N*ln(\sigma)
\end{align}</p>

<p>Because there are multiple buildings to be modeled, the model block incorporates a <a href="https://mc-stan.org/docs/2_23/stan-users-guide/ragged-data-structs-section.html">ragged data structure</a> and runs on a for-loop.</p>

<h4 id="individual-effects-model">Individual Effects Model</h4>

<p>There are several ways to characterize any probability distribution depending on the research question of interest. What we want to know is the probability of getting a CCL as extreme as X or greater. Given this framing of the question, it makes sense to examine the <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function#Complementary_cumulative_distribution_function_(tail_distribution)">complementary cumulative distribution function</a> (CCDF), an inverse of the cumulative distribution function where higher values of X have decreasing probabilities.</p>

<p>The <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/scripts/stan-models/individual-effects.stan">individual effects model</a> fits a separate CCDF (the blue curve) for each of the 22 systems. The models clearly fit the data well, even at the 1% probability threshold.</p>

<p><img src="/img/portfolio/indv_plot.jpeg" alt="indv_effects" /></p>

<p>Despite the accurate model fit for each building, there is still variation in the CCL across buildings. Many buildings have a 1% threshold CCL of 3 or 4, while others are equal 10 or greater!</p>

<p>This variation among buildings encompasses the variation in energy modeling and in in-field performance including building efficiency, HVAC sizing and design, as well as thermostat settings and homeowner operation.</p>

<h4 id="multilevel-model">Multilevel Model</h4>

<p>What we really want to know is the performance of the average building across all possible buildings. In order to estimate these singular parameters, I fit a <a href="https://github.com/blakeshurtz/AC_runtime_project/blob/master/scripts/stan-models/multi-level.stan">multi-level model</a> to the data.</p>

<p>A <a href="https://elevanth.org/blog/2017/08/24/multilevel-regression-as-default/">Bayesian multi-level model</a> assumes that each of the parameters for the individual buildings have their own shared Gaussian prior distributions. The parameters of these prior distributions, which are themselves random variables, represent the quantites of interest.</p>

<p>The CCDF for the multi-level model is below. The colored lines represent different quantiles on the parameters&rsquo; posterior distributions while the points are the data for all buildings. (I recommend opening the image in a new tab for a higher resolution view.)</p>

<p><img src="/img/portfolio/mlm_plot.jpeg" alt="mlm_plot" /></p>

<p>We can see that the CCDF for the mean cuts roughly down the middle of the data although it is pulled to the right by the larger CCLs to the degree of frequency with which those values occur.</p>

<p>The key results from the study are as follows (with 50% probability intervals):</p>

<blockquote>
<p>95% of the CCL&rsquo;s are less than 3.30 (2.58, 4.15) and 99% of the CCL’s are less than 5.88 (4.28, 7.98).</p>
</blockquote>

<p>A rightly-sized system will run for 5.88 hours under the most extreme conditions.</p>

<blockquote>
<p>The median CCL is 0.92 (0.82, 1.01).</p>
</blockquote>

<p>During a heat wave, a rightly-sized system will run for about an hour at a time.</p>

<blockquote>
<p>A CCL of 1 or greater occurs with 45% of the exceedances (0.38, 0.51)</p>
</blockquote>

<p>During a heat wave, a rightly-sized system will run for an hour or more on 45% of the cycles.</p>

<p>With these expectations in mind, a contractor can confidently understand how their system will perform under extreme weather conditions when it is accurately sized for the building.</p>

<h4 id="follow-up-study">Follow-up Study</h4>

<p>Several customers with rightly-sized systems had their indoor air temperatures monitored to ensure that their home maintained a comfortable temperature during heat waves.</p>

<p><img src="/img/portfolio/indoortemps.png" alt="indoor temps" /></p>

<p>We can see that this system maintained 74-75 °F indoor temps (the specified design temperature) on the hottest days of the year.</p>

<h4 id="works-cited">Works Cited</h4>

<p>Coles, S (2001). &ldquo;An Introduction to Statistical Modeling of Extreme Values.&rdquo; Springer Series in Statistics. Springer Verlag London.</p>

<p>Ribatet, Mathieu. &ldquo;The POT Package: An R Package to Model Peaks Over a Threshold.&rdquo; <a href="http://pot.r-forge.r-project.org/">http://pot.r-forge.r-project.org/</a></p>

<p>Vehtari, Aki. &ldquo;Extreme value analysis and user defined probability functions in Stan.&rdquo; <a href="https://mc-stan.org/users/documentation/case-studies/gpareto_functions.html">https://mc-stan.org/users/documentation/case-studies/gpareto_functions.html</a></p>

<p>GitHub repo <a href="https://github.com/blakeshurtz/AC_runtime_project">here</a>.</p>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://blakeshurtz.github.io/js/jquery.min.js"></script>
<script src="https://blakeshurtz.github.io/js/bootstrap.min.js"></script>
<script src="https://blakeshurtz.github.io/js/jquery.cookie.js"> </script>
<script src="https://blakeshurtz.github.io/js/ekko-lightbox.js"></script>
<script src="https://blakeshurtz.github.io/js/jquery.scrollTo.min.js"></script>
<script src="https://blakeshurtz.github.io/js/masonry.pkgd.min.js"></script>
<script src="https://blakeshurtz.github.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://blakeshurtz.github.io/js/owl.carousel.min.js"></script>
<script src="https://blakeshurtz.github.io/js/front.js"></script>



</body>
</html>
